<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Audio Library</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #111;
        margin: 0;
        padding: 15px;
        color: white;
    }

    #searchInput {
        width: 100%;
        padding: 12px;
        border-radius: 10px;
        border: none;
        margin-bottom: 20px;
        font-size: 18px;
        outline: none;
    }

    .card {
        width: 100%;
        padding: 12px;
        border-radius: 14px;
        margin-bottom: 14px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        backdrop-filter: blur(6px);
    }

    .title-box {
        flex: 1;
    }

    .title {
        font-size: 18px;
        font-weight: bold;
    }

    .len {
        font-size: 14px;
        opacity: .8;
        margin-top: 3px;
    }

    .btn-box {
        display: flex;
        gap: 12px;
    }

    button {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        border: none;
        font-size: 22px;
        cursor: pointer;
        color: white;
    }

    .playpause { background: #28a745; }
    .download { background: #007bff; }
</style>
</head>
<body>

<input type="text" id="searchInput" placeholder="Search audio..." onkeyup="searchAudio()">
<div id="audioList"></div>

<script>

let AUDIO_URLS = [
    "https://www.myinstants.com/media/sounds/bone-crack.mp3",
    "https://www.myinstants.com/media/sounds/punch.mp3",
    "https://github.com/virendrasoni195-tech/Funny-Sounds-1/raw/main/aaj-tehelka-omlette-banaunga.mp3",
    "https://www.myinstants.com/media/sounds/anime-wow-sound-effect.mp3"
];

let colors = ["#ff4d4d","#4dd2ff","#a64dff","#40ff00","#ff9933","#ff66cc"];
let currentAudio = null;
let currentBtn = null;

/* Format time mm:ss */
function formatTime(sec) {
    let m = Math.floor(sec / 60);
    let s = Math.floor(sec % 60);
    if (s < 10) s = "0" + s;
    return `${m}:${s}`;
}

/* Auto name */
function getNameFromURL(url) {
    return url.split('/').pop().replace(".mp3","")
              .replace(/[-_]/g," ")
              .replace(/\b\w/g, c => c.toUpperCase());
}

/* PLAY / PAUSE system */
function togglePlay(url, btn) {

    // अगर already वही audio चल रही है:
    if (currentAudio && currentAudio.src === url) {
        
        if (currentAudio.paused) {
            currentAudio.play();
            btn.innerHTML = "⏸";   // Pause icon
        } else {
            currentAudio.pause();
            btn.innerHTML = "▶";   // Play icon
        }
        return;
    }

    // New audio play
    if (currentAudio) currentAudio.pause();

    if (currentBtn) currentBtn.innerHTML = "▶";

    currentAudio = new Audio(url);
    currentAudio.play();

    btn.innerHTML = "⏸";
    currentBtn = btn;

    currentAudio.onended = () => {
        btn.innerHTML = "▶";
    };
}

/* Download */
function downloadSound(url) {
    const a = document.createElement("a");
    a.href = url;
    a.download = "";
    document.body.appendChild(a);
    a.click();
    a.remove();
}

/* Render */
function renderAudios() {
    let html = "";

    AUDIO_URLS.forEach((url, i) => {
        let name = getNameFromURL(url);
        let id = "audio_" + i;
        let color = colors[i % colors.length];

        html += `
            <div class="card" style="background:${color}55;">
                <div class="title-box">
                    <div class="title">${name}</div>
                    <div class="len" id="${id}">Loading...</div>
                </div>

                <div class="btn-box">
                    <button class="playpause" onclick="togglePlay('${url}', this)">▶</button>
                    <button class="download" onclick="downloadSound('${url}')">⬇</button>
                </div>
            </div>
        `;
    });

    document.getElementById("audioList").innerHTML = html;

    // Load durations
    AUDIO_URLS.forEach((url, i) => {
        let temp = new Audio(url);
        temp.addEventListener("loadedmetadata", () => {
            document.getElementById("audio_" + i).innerHTML = formatTime(temp.duration);
        });
    });
}

renderAudios();

function searchAudio() {
    let input = document.getElementById("searchInput").value.toLowerCase();
    let cards = document.querySelectorAll(".card");

    cards.forEach(card => {
        let text = card.querySelector(".title").innerText.toLowerCase();
        card.style.display = text.includes(input) ? "flex" : "none";
    });
}

</script>

</body>
</html>
